[gcode_macro SET_MATERIAL]
description: Applies some defaults for a given material type
gcode:
    {% set MATERIAL = params.MATERIAL|default("XXX")|string %}
    RESPOND MSG="Setting material: {MATERIAL}"
    {% if MATERIAL == "PLA" %}
        SET_PRESSURE_ADVANCE ADVANCE=0.0595 SMOOTH_TIME=0.04
        SET_RETRACTION RETRACT_LENGTH=0.75 RETRACT_SPEED=40 UNRETRACT_EXTRA_LENGTH=0 UNRETRACT_SPEED=30
    {% elif MATERIAL == "PET" %}
        SET_PRESSURE_ADVANCE ADVANCE=0.0510 SMOOTH_TIME=0.04
        SET_RETRACTION RETRACT_LENGTH=1.4 RETRACT_SPEED=30 UNRETRACT_EXTRA_LENGTH=0 UNRETRACT_SPEED=20
    {% elif MATERIAL == "ABS" %}
        SET_PRESSURE_ADVANCE ADVANCE=0.028 SMOOTH_TIME=0.04
        SET_RETRACTION RETRACT_LENGTH=0.5 RETRACT_SPEED=40 UNRETRACT_EXTRA_LENGTH=0 UNRETRACT_SPEED=30
        SET_FAN_SPEED FAN=chamber SPEED=0.8
    {% endif %}